---
deployment:
    tasks:
        # NOTE: public_html on cPanel must not be removed or renamed.
        # This folder has owner USER:nobody, and the USER user does not have
        # access to change owner. So this folder must stay as-is to keep the nobody
        # group, which is critical to the site working. A new folder won't work.
        - export DEPLOYPATH=/home/wheke/public_html
        - export REPOPATH=/home/wheke/repositories/app3/build/
        # Remove previous old files, if any.
        - /bin/rm -Rf ${DEPLOYPATH}_old
        # Copy old site files to another directory.
        - /bin/cp -R ${DEPLOYPATH} ${DEPLOYPATH}_old
        # Set correct permissions.
        - /bin/chmod 755 ${DEPLOYPATH}
        - /bin/find ${DEPLOYPATH} -type d -exec /bin/chmod 755 '{}' \;
        - /bin/find ${DEPLOYPATH} -type f -exec /bin/chmod 644 '{}' \;
